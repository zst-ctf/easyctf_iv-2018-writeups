import math
import gmpy2

gmpy2.get_context().precision=700

n=20499898310333713040102939005948681424193922350842712350390137827798282147902421338642837083306524071614131512312460655569595477735096207384331195006892220930135990331740206622368305394909070516187663715695948659757823347347656346517119212428006866348092766547543063414180940602604640142246229138216965453024353307426012513335551554651829393585082596682703835270878114464020679133182416370485732723338613319240816388160036677865940169048605851722578099959731827341806076197444551270677514735836671583802964066482173565382783251681400223488049363330273426107220822470488129410632362603192031120240326436556066839634277
e=65537
c=19160955009433525336777317798112657959695320390155921056983024133391827517087152014963924648269784970052842243232650558173634330915324076635229339426144593933798208649416966235931390933409147599895962126229697136954457069555064851029389436537984803283562798289841758458883905347955613004444204377120512995136445842150214942817849194591396270502198021898795092718068185257010620927413646260533677923475135183681950405542479407536528770422152847732306797229091533173394405541164638650243782294312222052112664364689889917703756044307835216551593436208152755985711738547395309451228215249163540090517292828449203859471513
#2d+phi(n)
portion = 25038088309658648369613904415991437724645272836423015868762613167199028954985712145181787010070115428237133653969844271103144684892478360094011809329971722666987788955362447968165745478695925240577794803100347017001107096442603946001164427196910940167974348269734659179942904275686853050940387263860461601982529435075264518017005379148883501217626866375934297045378063308607989029972217883032291316237089847568720209666762915235722491771141342328598136054078371288222919302316261295576985561295906222440532017536474870952727843148173428706092073285537871459831128089678529669079783502469201665527364366184685543663906

n = gmpy2.mpz(n)

upper_limit = n* 0.8
lower_limit = gmpy2.isqrt(n)

phi = gmpy2.mpz(upper_limit)

try:
    while phi > lower_limit:
        phi -= 2
        dd = portion - phi
        # if dd is odd, then dd/2 is not an integer
        # assert (dd & 1)
        d = dd / 2
        result = d*e % phi
        if (result == 1):
            print("\nSuccess")
            print("phi=", int(phi))
            print("d=", int(d))
            break;

except KeyboardInterrupt:
    print("\rInterrupted")
    print("phi=", int(phi))
    print("d=", int(d))
